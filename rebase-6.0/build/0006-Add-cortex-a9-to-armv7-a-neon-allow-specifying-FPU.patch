From e51887e0458cf694b3d25ec065e2a0fe5b950aee Mon Sep 17 00:00:00 2001
From: Kyle Repinski <repinski23@gmail.com>
Date: Sun, 11 Oct 2015 10:42:46 -0500
Subject: [PATCH 06/12] Add cortex-a9 to armv7-a-neon, allow specifying FPU.

Change-Id: I2527e8971cae62ddb35339ea0f5627ea46ee8239
---
 core/combo/arch/arm/armv7-a-neon.mk | 17 +++++++++++++++--
 1 file changed, 15 insertions(+), 2 deletions(-)

diff --git a/core/combo/arch/arm/armv7-a-neon.mk b/core/combo/arch/arm/armv7-a-neon.mk
index 99f17aa..d4e92c1 100644
--- a/core/combo/arch/arm/armv7-a-neon.mk
+++ b/core/combo/arch/arm/armv7-a-neon.mk
@@ -19,6 +19,11 @@ ifneq (,$(filter cortex-a15 krait denver,$(TARGET_$(combo_2nd_arch_prefix)CPU_VA
 	arch_variant_ldflags := \
 		-Wl,--no-fix-cortex-a8
 else
+ifeq ($(strip $(TARGET_$(combo_2nd_arch_prefix)CPU_VARIANT)),cortex-a9)
+	arch_variant_cflags := -mcpu=cortex-a9
+	arch_variant_ldflags := \
+		-Wl,--no-fix-cortex-a8
+else
 ifeq ($(strip $(TARGET_$(combo_2nd_arch_prefix)CPU_VARIANT)),cortex-a8)
 	arch_variant_cflags := -mcpu=cortex-a8
 	arch_variant_ldflags := \
@@ -36,7 +41,15 @@ else
 endif
 endif
 endif
+endif
 
 arch_variant_cflags += \
-    -mfloat-abi=softfp \
-    -mfpu=neon
+	-mfloat-abi=softfp
+
+ifeq ($(strip $(TARGET_$(combo_2nd_arch_prefix)FPU_VARIANT)),)
+arch_variant_cflags += \
+	-mfpu=neon
+else
+arch_variant_cflags += \
+	-mfpu=$(TARGET_$(combo_2nd_arch_prefix)FPU_VARIANT)
+endif
-- 
2.7.4

